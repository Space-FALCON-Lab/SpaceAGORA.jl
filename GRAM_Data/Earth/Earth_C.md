The EarthGRAM C Interface
===========================

This documents the C interface for EarthGRAM.  Since the GRAM framework is common to all models, only the Earth specific information is documented on this page.  See the [C interface](Documentation/Markdown/GRAM_C.md) page for documentation on the common framework.

A simple example of using the Earth atmosphere can be seen [here](@ref Earth/examples/Earth_C.c).

- - - - - - - 

Path to Earth Data
------------------

The location of the Earth data files are specified during the creation of the \p EarthAtmosphere_C handle with the function \ref createAtmosphere_E.  

~~~~~~~~~~
EarthAtmosphere_C* earth = createAtmosphere_E("\path\tomy\earthdata\");
~~~~~~~~~~

Path to Model Data
------------------

Use the function \ref setAtmosPath_E to set the folder location  of the Earth model data files.  

~~~~~~~~~~
setAtmosPath_E(earth, "\path\tomy\earthdata\modeldata");
~~~~~~~~~~

MERRA-2 Path and Parameters
---------------------------

Use the function \ref setMERRA2Path_E to set the folder location of the MERRA-2 binary data.  Identify the desired MERRA-2 data by specifying an hour code and data extents with \ref setMERRA2Parameters_E.

~~~~~~~~~~
setMERRA2Path_E(earth, "\path\tomy\earthdata\MERRA2data\");
setMERRA2Parameters_E(earth, 9, -30, 60, -85, 50);
~~~~~~~~~~

NCEP Path and Parameters
------------------------

Use the function \ref setNCEPPath_E to set the folder location of the NCEP binary data.  
Identify the desired NCEP data by specifying year and hour codes with \ref setNCEPParameters_E. By default, EarthGRAM uses the MERRA-2 model.  To activate the NCEP model, call \ref setUseNCEP_E.

~~~~~~~~~~
setUseNCEP(earth, 1);
setNCEPPath_E(earth, "\path\tomy\earthdata\NCEPdata\FixedBin");
setNCEPParameters_E(earth, 9715, 0);
~~~~~~~~~~

Range Reference Atmosphere (RRA) Path and Parameters
----------------------------------------------------

Use the function \ref setRRAPath_E to set the folder location of the RRA data.  
The name of the RRA site list file can be set with \ref setRRASiteList_E.
The function \ref setRRAParameters_E is used to select the year of the RRA 
data set and define a region in which RRA data is used.  Use of the RRA data
is enabled or disabled with \ref setUseRRA_E.

~~~~~~~~~~
setRRAPath_E(earth, "\path\tomy\earthdata\NCEPdata\RRAdata");
setRRASiteList_E(earth, "rrasites.txt");
setRRAPParameters_E(earth, 3, 0.5, 2.5);
setUseRRA_E(earth, 1);
~~~~~~~~~~

Thermosphere Model
------------------

The thermosphere model is chosen with the \ref GRAM::EarthAtmosphere::setThermosphereModel_E method. Valid models are 1 = MET, 2 = MSIS, and 3 = JB2008.  The default model is 1 = MET.

~~~~~~~~~~
setThermosphereModel_E(earth, 3);
~~~~~~~~~~

Surface Roughness
-----------------

The surface roughness is set with \ref GRAM::EarthAtmosphere::setSurfaceRoughness_E. Any negative value will signify the use of 1-by-1 degree lat-lon surface data. A zero value will indicate speed-dependent surface roughness over water.  Values between 1.0e-5 and 3 override computed values with the user-specified surface roughness.

~~~~~~~~~~
setSurfaceRoughness_E(earth, 1.34);
~~~~~~~~~~

Solar Parameters
----------------

Set solar flux and the AP geomagnetic index parameters with \ref setSolarParameters_E.  

~~~~~~~~~~
setSolarParameters_E(earth, 73.1, 70.1, 16.3);
~~~~~~~~~~

JB2008 Parameters
-----------------

The function \ref setJB2008Parameters_E is used to set parameters for the JB2008 
thermosphere model.

~~~~~~~~~~
setThermosphereModel_E(earth, 3);
setJB2008Parameters_E(earth, 120.4, 120.9, 127.3, 125.5, 133.0, 133.1, 17.0);
~~~~~~~~~~

Initial Perturbations
---------------------

The function \ref setInitialPerturbations_E is used to override the random initial
perturbations generated by EarthGRAM.

~~~~~~~~~~
setInitialPerturbations_E(earth, 4.7e-9, 601.17, 91.66, -69.4, -3.4);
~~~~~~~~~~

Patchiness
----------

Use \ref setPatchiness_E to enable patchiness in the perturbation model.  

~~~~~~~~~~
setPatchiness_E(earth, 1);
~~~~~~~~~~

Earth Specific Metrics
----------------------

EarthGRAM has many metrics in common with all other models.  However, the earth model has many metrics that particular to this model.  These may be retrieved with the method  \ref GRAM::EarthAtmosphere::getEarthState_E.

~~~~~~~~~~
EarthState_C eState;
getEarthState_E(earth, &eState);
~~~~~~~~~~

